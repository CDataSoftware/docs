## 前提条件

#### CData IP をホワイトリストに登録

Azure Data Lake Storage への接続を確立するには、CData のIP 経由でAzure Data Lake Storage へのアクセスを許可する必要があります。Azure Data Lake Storage をファイアウォールの内側でホスティングする場合は、これらのIP アドレスをファイアウォールの許可リストに登録する必要があります。

- 範囲：`52.224.0.160`～`52.224.0.175` および`4.154.117.160`～`4.154.117.175`
- CIDR 表記：`52.224.0.160/28` および`4.154.117.160/28`

#### Azure Data Lake Storage が一般にアクセス可能であることを確認

パブリックフェイシングIP / ドメインを指定して、このデータソースに接続します。次のプライベートIP の範囲は機能しません。

- `10.0.0.0` to `10.255.255.255`
- `172.16.0.0` to `172.31.255.255`
- `192.168.0.0` to `192.168.255.255`
- `127.0.0.1` (aka ‘localhost’)

#### If Connect AI Is Configured to Run in the Same Region as Azure Data Lake Storage

If you have a firewall enabled and Connect AI is running in the same region as Azure Data Lake Storage, you need to configure virtual network rules and add Connect AI virtual network subnets to the list of allowed virtual networks. See Microsoft’s [documentation](https://learn.microsoft.com/en-us/azure/storage/common/storage-network-security?tabs=azure-portal#grant-access-from-a-virtual-network) for details. Contact [CData support](https://www.cdata.com/support/submit.aspx) if you need a list of region-specific fully qualified subnet IDs.

## セットアップガイド

以下の手順で、Azure Data Lake Storage をConnect AI アカウントに接続します。

<Steps>
<Step>
Connect AI のダッシュボードから**Connections** ページを開きます。
</Step>
<Step>
右上の **+ Add Connection** をクリックします。
</Step>
<Step>
検索フィールドに *Azure Data Lake Storage* と入力し、データソース名をクリックします。
</Step>
<Step>
新しいコネクションの**Basic Settings** タブで、コネクション名を入力するかデフォルトの名前をそのまま使用します。
</Step>
<Step>
Enter the following information:
	- **File Format**—choose the file format type.
	- **Auth Scheme**—set to **Azure AD** (Entra ID).
	- **Azure Storage Account**—the name of the storage account.
	- **File System**(Optional)—enter the file system protocol.
</Step>
<Step>
OAuth でセキュアに接続するには、**Sign in** をクリックします。これにより、Azure Data Lake Storage のサインインページが新しいタブで開かれます。
</Step>
<Step>
Azure Data Lake Storage アカウントにログインし、リクエストされた権限を設定します（該当する場合）。
</Step>
<Step>
Connect AI **Add Azure Data Lake Storage Connection** ページ上部の、**Save & Test** をクリックします。
	- 接続テストに成功すると、コネクションが作成されたことを示す**Connection successfully saved** というメッセージが表示されます。**Edit Connection** ページの**Status** も**Authenticated** に変わります。**Edit Connection** ページの右ペインにある**Data Model** タブで、成功したコネクションのデータモデルを表示します。
	- 接続テストに失敗した場合は、入力したログイン情報に余分なスペースや文字がないかを確認してください。Connect AI は、データが不足している必須フィールドの下にエラーメッセージを表示します。一部のデータソースでは、ソースのWeb サイトに直接サインインする必要があります。サインインしていない場合は、**Sign in** ボタンの下にエラーメッセージが表示されます。エラーを修正し、もう一度試してください。
	- 失敗したコネクションは下書きとして保存され、**Status** は**Not Authenticated** になります。後でコネクションに戻って認証することができます。
</Step>
</Steps>