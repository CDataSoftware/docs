import SaveAndTest from '/ja/snippets/save-and-test.mdx';

## Prerequisites

To use the OAuthClient authentication method, you must create a service principle in Databricks Lakebase and assign permissions. Refer to the [Databricks documentation](https://docs.databricks.com/aws/ja/admin/users-groups/manage-service-principals).

Next, the account or workspace administrator creates an OAuth secret:

<Steps>
<Step>
At the new service principal's details page, in the **Developer Service Principal** section, click the **Secrets** tab.
</Step>
<Step>
Under OAuth secrets, click the **Generate secret** button.
</Step>
<Step>
Enter the desired lifetime for the secret in days, up to a maximum of 730 days (two years). The admin console displays updated details about the new service principal, including the OAuth secret and the Client ID (which is the same as the service principal's application ID).
</Step>
<Step>
Enter the Client Id and Secret in the fields below.
</Step>
</Steps>

## セットアップガイド

以下の手順で、Databricks Lakebase をConnect AI アカウントに接続します。

<Steps>
<Step>
Connect AI のダッシュボードから**Connections** ページを開きます。
</Step>
<Step>
右上の **\+ Add Connection** をクリックします。
</Step>
<Step>
検索フィールドに *Databricks Lakebase* と入力し、データソース名をクリックします。
</Step>
<Step>
新しいコネクションの**Basic Settings** タブで、コネクション名を入力するかデフォルトの名前をそのまま使用します。
</Step>
<Step>
Enter the host name or IP address of the **Server** name hosting the Databricks Lakebase database.
</Step>
<Step>
Enter the name of the target Databricks Lakebase **Database**.
</Step>
<Step>
For **Databricks Instance**, enter the URL for the user interface during normal access of the Databricks console. This should be in the format of `dbc-(id).cloud.databricks.com`.
</Step>
<Step>
Enter the **Port** number of the server hosting the Databricks Lakebase database. The default value is 5432.
</Step>
<Step>
Select the Authentication method, then proceed to the relevant section and follow those instructions.
</Step>
</Steps>

## Authentication Methods

<Tabs>
  <Tab title="OAuthClient">
<Steps>
<Step>
Enter the **OAuthClientId** assigned when you configured the service principal (in the prerequisites).
</Step>
<Step>
Enter the **OAuthClientSecret** assigned when you configured the service principal (in the prerequisites). This value authenticates the application to the OAuth authorization server.
</Step>
<SaveAndTest title="Databricks Lakebase"/>
</Steps>
  </Tab>

  <Tab title="OAuthPKCE">
<Steps>
<Step>
Enter the **User** Id of the authenticating user. The user obtains a temporary code from the authorization server.
</Step>
<SaveAndTest title="Databricks Lakebase"/>
</Steps>
  </Tab>
</Tabs>

## 詳細について

For more information about interactions between Connect AI and Lakebase, see [this information page](https://cdn.cdata.com/help/LSM/jp/cloud/default.htm#default).