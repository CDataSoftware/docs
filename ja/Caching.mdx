---
title: "Caching"
description: "***キャッシュ*** を使用すると、ライブデータを取得する代わりに、データベースからキャッシュデータを取得することができます。一部のドライバーではライブデータの取得に時間がかかることがあるため、この機能によりデータ接続のパフォーマンスを向上することができます。"
---


Connect AI のキャッシュ機能では、ユーザーはキャッシュするテーブル、つまりデータベースに保存するテーブルを選択できます。Connect AI は、選択したテーブルのデータをスケジュールに基づいて取得し、必要なときにいつでも迅速かつ確実にデータにアクセスできるようにします。


データのキャッシュを有効にすると、Connect AI はライブデータではなく*キャッシュされた*データに対してデータベースクエリを実行します。


**Jobs** ページには、キャッシュジョブを含む、実行するジョブのリストが表示されます。

<Frame>
  <img src="/ja/images/cache_jobs.png" alt="Cache jobs" />
</Frame>

各ジョブについて、**Jobs** ページには完全な接続とテーブル情報、ジョブの種類、ジョブが最後に実行された時間、ジョブのステータスが表示されます。ジョブを選択してページ上部の**Run** をクリックすることで、複数のジョブをすぐに実行することができます。また、複数のジョブを選択してページ上部の**Delete** をクリックすると、複数のジョブを削除できます。ジョブを削除すると、Connect AI により関連するキャッシュデータが削除されることに注意してください。

また**Jobs** ページでは、スケジュールされたジョブを削除はせずに一時停止したい場合に、特定のキャッシュジョブを無効にすることもできます。**Status** カラムのトグルスイッチを使用して、ジョブを有効化 / 無効化します。ジョブが無効化されている限り、手動でジョブを実行することはできません。キャッシュジョブが無効になっている場合、そのデータのクエリではライブデータソースが使用されます。

<Note>
**Note:** キャッシュ機能は、リレーショナルデータベースでは使用できません。
</Note>

## 差分更新

Connect AI キャッシュ機能を使用すると、差分更新が可能になり、パフォーマンスが向上します。キャッシュジョブを作成すると、Connect AI はデータベース内でどの行が新しい行か、または前回の実行以降に変更された行かを示す日付または日付+時刻カラムを検索しようと試みます。その後、Connect AI はそれらの行に対してのみキャッシュジョブを実行できます。それ以外の場合は、Connect AI はフル更新を実行します。

## キャッシュを設定

キャッシュ機能を使用するには、事前にキャッシュデータ用にPostgreSQL データベースを設定する必要があります。

キャッシュデータ用にPostgreSQL のコネクションを追加するには：

<Steps>
<Step>
**Setup Cache Connection** をクリックします。**Add PostgreSQL Connection** ページが表示されます。
</Step>
<Step>
PostgreSQL コネクションの認証を設定します。詳しい手順については、[PostgreSQL](/ja/Data-Sources/PostgreSQL) を参照してください。
</Step>
<Step>
**Save & Test** をクリックしてコネクションを保存します。これで、PostgreSQL データベースにデータをキャッシュできます。
</Step>
</Steps>

メインの**Jobs** ページから**Manage Cache Connection** をクリックすることで、いつでもPostgreSQL コネクションを編集できます。コネクションを編集すると、すでにキャッシュにあるデータはクリアされます。


## キャッシュジョブを追加

新しいキャッシュジョブを追加するには、次の手順を実行します。

<Steps>
<Step>
**Jobs** ページで**Add Job** > **Cache Job** をクリックします。これにより**Add Jobs** ダイアログが表示されます。ジョブの追加には**コネクションの選択**、**テーブルの追加**、および**ジョブのスケジュール**の3つのステップがあります。ヘッダーのステップをクリックするか、**back** をクリックすることで、前のステップに戻ることができます。
	<Frame>
	  <img src="/ja/images/caching_add_jobs.png" alt="Caching add jobs" />
	</Frame>
</Step>
<Step>
ダイアログでコネクション一覧からコネクションを1つ選択し（ステップ1）、**Next** をクリックします。
</Step>
<Step>
ジョブに追加するテーブルをコネクションから選択します（ステップ2）。
	<Frame>
	  <img src="/ja/images/caching_add_tables.png" alt="Caching add tables" />
	</Frame>
	Connect AI に、選択されたデータセットの総数が表示されます。次に、**Next** をクリックします。
</Step>
<Step>
データの更新頻度を、時間、日、週、または月単位で選択します（ステップ3）。
	<Frame>
	  <img src="/ja/images/caching_schedule_jobs.png" alt="Caching schedule jobs" />
	</Frame>
</Step>
<Step>
**Cache Scheme** (full or incremental) および**Time Check** を選択します。
	**Time Check Column** は差分更新専用です。Connect AI が新しい行または前回の実行以降に変更された行を判断するために使用できるカラムをテーブル内から選択します。これは通常、日付または日付+時刻のカラムです。
	<Note>
	 *Note:** データにタイムチェックカラムが含まれていない場合、Connect AI はフル更新のみを実行します。
	</Note>
</Step>
<Step>
追加したジョブに問題がなければ、**Confirm** をクリックしてジョブを保存します。問題がある場合は、**Back** をクリックするか、ヘッダーで前のいずれかのステップをクリックして変更を加えます。
	キャッシュジョブが**ジョブ** キューに表示されます。特定のデータコネクションに対して選択した各テーブルは、個別のジョブとしてキューに保存されます。
</Step>
</Steps>

## キャッシュジョブを編集

一覧の編集または削除用アイコンをクリックすることで、いつでもジョブを編集または削除することができます。また、**Run Now** をクリックすると、いつでも手動でジョブを実行できます。

<Frame>
  <img src="/ja/images/edit_job.png" alt="Edit job" />
</Frame>

**Edit Job** ページでは、以下の操作が可能です：

- キャッシュスキームを変更する。例えば、フル更新を差分更新に変更するなど。
- 実行履歴やステータスを表示する。ジョブが成功したかどうかを確認できます。
- ログの詳細レベルを変更する。
- 単一ジョブを手動で実行する。複数ジョブの実行は、メインの**Jobs** 画面で行えます。
- キャッシュ機能をOFF にする。キャッシュをOFF にすると、再度ON にするまでクエリはライブデータソースに送られることに注意してください。
- キャッシュをリフレッシュする。キャッシュをリフレッシュすると、以前に保存されたデータがすべて削除されるため、完了までに時間がかかる場合があります。
- ジョブを削除する。これにより、データベース内のすべてのキャッシュデータが削除されます。複数ジョブの削除は、メインの**Jobs** 画面で行えます。